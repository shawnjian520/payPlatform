$.plug(function(t){function e(e,n){var s,i,a,f=t.$$(n)[0],g=e.split("."),h=g.shift(),o=h.indexOf("["),c=h.charAt(0);if("#"==c)return r(h.substring(1),f);o>=0&&(a=h.substring(o+1,h.length-1).split("="),s=a[0],i=2==a.length&&a[1],i&&"'"==i.charAt(0)&&(i=i.substring(1,i.length-1)),h=h.substring(0,o));var m=h.split("#");if(2==m.length){if(f=r(m[1],f),!f)return[];if(!t.eqSI(f.tagName,m[0]))return[];if(1==g.length)return[f]}var v=h?u(h,f):l(g.shift(),f);if(!g.length&&!s)return v;for(var p=[],y=0,N=v.length;N>y;y++){var b=v[y],d=g.length,q=!0;if(g.length)for(;d--;)t.hasClass([b],g[d])||(q=!1);!q||s&&i&&b[s]!=i||p.push(b)}return p}var n=document,r=function(t,e){return(e||n).getElementById(t)},u=function(t,e){return(e||n).getElementsByTagName(t)},l=n.getElementsByClassName?function(t,e){return(e||n).getElementsByClassName(t)}:function(e,r){var u=t.walk(function(t){return t.className&&t.className.indexOf(e)>=0},r||n);return t.unique(u)};t.setQuery(function(t,r){if(n.querySelectorAll)return(r||n).querySelectorAll(t);for(var u,l=[[r||n]],s=t.split(" "),i=[],a=0,f=s.length;f>a;a++){var g=l[a];if(0==g.length)return i;for(var h=s[a],o=[],c=0,m=g.length;m>c;c++){u=e(h,g[c]);for(var v=0,p=u.length;p>v;v++)o.push(u[v])}l.push(o)}return l.length>1?l.pop():[]})});